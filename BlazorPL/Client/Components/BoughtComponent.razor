@inject HttpClient Http
@inject IHttpClientFactory HttpClientFactory

<MudCard Style="width:100%; margin-top:10px; height:fit-content()" Outlined="true" Square="false">
    <MudCardContent>
        @if (BoughtTicket != null)
        {
            <MudGrid>
                <MudItem xs="2">
                    <MudText>@BoughtTicket.EventName</MudText>
                </MudItem>
                <MudItem xs="2">
                    <MudText>@BoughtTicket.EventStartDate.ToShortDateString()</MudText>
                </MudItem>
                <MudItem xs="2">
                    <MudText><b>Ár:</b> @BoughtTicket.Price.ToString("N0") Ft</MudText>
                </MudItem>
                <MudItem xs="2">
                    <MudText><b>Mennyiség:</b> @BoughtTicket.Amount</MudText>
                </MudItem>
                <MudItem xs="3">
                    <MudText><b>Kategória:</b> @BoughtTicket.Category</MudText>
                </MudItem>
                <MudItem xs="1">
                    @if (valid)
                    {

                        <MudText Color="Color.Success" Align="Align.Center"><b>Érvényes</b></MudText>

                    }
                    else
                    {
                        <MudText Color="Color.Error" Align="Align.Center"><b>Érvénytelen</b></MudText>
                    }
                </MudItem>
            </MudGrid>
        }

    </MudCardContent>
</MudCard>

@code {
    [Parameter]
    public BoughtTicketDto BoughtTicket { get; set; }

    [Parameter]
    public string UserId { get; set; }

    public bool valid { get; set; } = false;

    protected override void OnInitialized()
    {

        DateTime now = DateTime.Now;
        if (BoughtTicket.EventStartDate < now) valid = false;
        else valid = true;

    }
}
